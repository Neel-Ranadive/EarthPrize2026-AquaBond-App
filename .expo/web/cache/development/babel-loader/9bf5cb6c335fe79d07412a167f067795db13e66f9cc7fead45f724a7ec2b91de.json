{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { useEffect, useRef, useState } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport { Camera } from \"expo-camera\";\nimport * as ImageManipulator from \"expo-image-manipulator\";\nimport * as FileSystem from \"expo-file-system\";\nimport { rgbToLab } from \"./colorUtils\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nfunction computeAverageRGBFromUri(_x) {\n  return _computeAverageRGBFromUri.apply(this, arguments);\n}\nfunction _computeAverageRGBFromUri() {\n  _computeAverageRGBFromUri = _asyncToGenerator(function* (uri) {\n    try {\n      var Skia = require('@shopify/react-native-skia');\n      if (!Skia) throw new Error('Skia not available');\n      var b64 = yield FileSystem.readAsStringAsync(uri, {\n        encoding: FileSystem.EncodingType.Base64\n      });\n      var bytes;\n      if (typeof atob === 'function') {\n        var bin = atob(b64);\n        bytes = new Uint8Array(bin.length);\n        for (var i = 0; i < bin.length; i++) bytes[i] = bin.charCodeAt(i);\n      } else if (typeof Buffer !== 'undefined') {\n        var buf = Buffer.from(b64, 'base64');\n        bytes = new Uint8Array(buf);\n      } else {\n        throw new Error('No base64->bytes available');\n      }\n      var img = Skia.Image.MakeImageFromEncoded(bytes);\n      if (!img) throw new Error('Skia failed to decode image');\n      var w = img.width();\n      var h = img.height();\n      if (typeof img.readPixels === 'function') {\n        var px = img.readPixels(0, 0, w, h);\n        if (!px) throw new Error('readPixels returned null');\n        var r = 0,\n          g = 0,\n          b = 0,\n          count = 0;\n        for (var _i = 0; _i < px.length; _i += 4) {\n          r += px[_i];\n          g += px[_i + 1];\n          b += px[_i + 2];\n          count++;\n        }\n        return [Math.round(r / count), Math.round(g / count), Math.round(b / count)];\n      } else {\n        throw new Error('img.readPixels not available on this Skia build');\n      }\n    } catch (e) {\n      console.warn('computeAverageRGBFromUri Skia path failed:', e);\n    }\n    try {\n      var SERVER = \"http://10.0.2.2:3000\";\n      var _b = yield FileSystem.readAsStringAsync(uri, {\n        encoding: FileSystem.EncodingType.Base64\n      });\n      var resp = yield fetch(SERVER + \"/decode\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          imageBase64: _b\n        })\n      });\n      if (!resp.ok) throw new Error(\"server decode failed: \" + resp.status);\n      var data = yield resp.json();\n      if (data && typeof data.r === 'number' && typeof data.g === 'number' && typeof data.b === 'number') {\n        return [Math.round(data.r), Math.round(data.g), Math.round(data.b)];\n      }\n      return null;\n    } catch (e) {\n      console.warn('computeAverageRGBFromUri server fallback failed:', e);\n      return null;\n    }\n  });\n  return _computeAverageRGBFromUri.apply(this, arguments);\n}\nexport default function Index() {\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    hasPermission = _useState2[0],\n    setHasPermission = _useState2[1];\n  var _useState3 = useState(Camera.Constants.Type.back),\n    _useState4 = _slicedToArray(_useState3, 2),\n    type = _useState4[0],\n    setType = _useState4[1];\n  var cameraRef = useRef(null);\n  var _useState5 = useState(null),\n    _useState6 = _slicedToArray(_useState5, 2),\n    photoUri = _useState6[0],\n    setPhotoUri = _useState6[1];\n  var _useState7 = useState(null),\n    _useState8 = _slicedToArray(_useState7, 2),\n    croppedUri = _useState8[0],\n    setCroppedUri = _useState8[1];\n  var _useState9 = useState(null),\n    _useState0 = _slicedToArray(_useState9, 2),\n    avgRgb = _useState0[0],\n    setAvgRgb = _useState0[1];\n  var _useState1 = useState(null),\n    _useState10 = _slicedToArray(_useState1, 2),\n    lab = _useState10[0],\n    setLab = _useState10[1];\n  var _useState11 = useState(false),\n    _useState12 = _slicedToArray(_useState11, 2),\n    processing = _useState12[0],\n    setProcessing = _useState12[1];\n  var _useState13 = useState('camera'),\n    _useState14 = _slicedToArray(_useState13, 2),\n    activeTab = _useState14[0],\n    setActiveTab = _useState14[1];\n  var _useState15 = useState([]),\n    _useState16 = _slicedToArray(_useState15, 2),\n    logs = _useState16[0],\n    setLogs = _useState16[1];\n  useEffect(function () {\n    _asyncToGenerator(function* () {\n      var _yield$Camera$request = yield Camera.requestCameraPermissionsAsync(),\n        status = _yield$Camera$request.status;\n      setHasPermission(status === \"granted\");\n      try {\n        var cur = yield AsyncStorage.getItem('scans');\n        var arr = cur ? JSON.parse(cur) : [];\n        setLogs(arr);\n      } catch (e) {\n        console.warn('load scans failed', e);\n      }\n    })();\n  }, []);\n  function takePhotoAndCropROI() {\n    return _takePhotoAndCropROI.apply(this, arguments);\n  }\n  function _takePhotoAndCropROI() {\n    _takePhotoAndCropROI = _asyncToGenerator(function* () {\n      if (!cameraRef.current || processing) return;\n      setProcessing(true);\n      try {\n        var _photo$width, _photo$height;\n        var photo = yield cameraRef.current.takePictureAsync({\n          quality: 0.8,\n          skipProcessing: Platform.OS === \"android\"\n        });\n        setPhotoUri(photo.uri);\n        var w = (_photo$width = photo.width) != null ? _photo$width : 0;\n        var h = (_photo$height = photo.height) != null ? _photo$height : 0;\n        var cropSize = Math.floor(Math.min(w, h) * 0.12);\n        var originX = Math.floor((w - cropSize) / 2);\n        var originY = Math.floor((h - cropSize) / 2);\n        var manipResult = yield ImageManipulator.manipulateAsync(photo.uri, [{\n          crop: {\n            originX: originX,\n            originY: originY,\n            width: cropSize,\n            height: cropSize\n          }\n        }], {\n          compress: 0.9,\n          format: ImageManipulator.SaveFormat.JPEG\n        });\n        setCroppedUri(manipResult.uri);\n        try {\n          var avg = yield computeAverageRGBFromUri(manipResult.uri);\n          if (avg) {\n            setAvgRgb(avg);\n            var labVal = rgbToLab(avg[0], avg[1], avg[2]);\n            setLab(labVal);\n            var entry = {\n              id: Date.now(),\n              timestamp: new Date().toISOString(),\n              photoUri: photo.uri,\n              croppedUri: manipResult.uri,\n              avgRgb: avg,\n              lab: labVal\n            };\n            try {\n              var cur = yield AsyncStorage.getItem('scans');\n              var arr = cur ? JSON.parse(cur) : [];\n              arr.unshift(entry);\n              yield AsyncStorage.setItem('scans', JSON.stringify(arr));\n              setLogs(arr);\n            } catch (e) {\n              console.warn('save scan failed', e);\n            }\n            _asyncToGenerator(function* () {\n              try {\n                var SERVER = 'http://10.0.2.2:3000';\n                var b64 = yield FileSystem.readAsStringAsync(manipResult.uri, {\n                  encoding: FileSystem.EncodingType.Base64\n                });\n                yield fetch(SERVER + \"/upload\", {\n                  method: 'POST',\n                  headers: {\n                    'Content-Type': 'application/json'\n                  },\n                  body: JSON.stringify({\n                    imageBase64: b64,\n                    metadata: {\n                      timestamp: entry.timestamp,\n                      avgRgb: entry.avgRgb,\n                      lab: entry.lab\n                    }\n                  })\n                });\n              } catch (e) {\n                console.warn('auto-upload failed', e);\n              }\n            })();\n          }\n        } catch (e) {\n          console.warn(\"pixel decode failed\", e);\n        }\n      } catch (e) {\n        console.warn(\"capture error\", e);\n      } finally {\n        setProcessing(false);\n      }\n    });\n    return _takePhotoAndCropROI.apply(this, arguments);\n  }\n  function reset() {\n    setPhotoUri(null);\n    setCroppedUri(null);\n    setAvgRgb(null);\n    setLab(null);\n  }\n  function clearScans() {\n    return _clearScans.apply(this, arguments);\n  }\n  function _clearScans() {\n    _clearScans = _asyncToGenerator(function* () {\n      try {\n        yield AsyncStorage.removeItem('scans');\n        setLogs([]);\n      } catch (e) {\n        console.warn('clearScans failed', e);\n      }\n    });\n    return _clearScans.apply(this, arguments);\n  }\n  function exportLogsCSV() {\n    return _exportLogsCSV.apply(this, arguments);\n  }\n  function _exportLogsCSV() {\n    _exportLogsCSV = _asyncToGenerator(function* () {\n      try {\n        if (!logs || logs.length === 0) {\n          Alert.alert('No logs', 'There are no scans to export.');\n          return;\n        }\n        var header = 'id,timestamp,r,g,b,L,a,b,photoUri,croppedUri\\n';\n        var rows = logs.map(function (it) {\n          var r = it.avgRgb ? it.avgRgb[0] : '';\n          var g = it.avgRgb ? it.avgRgb[1] : '';\n          var b = it.avgRgb ? it.avgRgb[2] : '';\n          var L = it.lab ? it.lab.L : '';\n          var a = it.lab ? it.lab.a : '';\n          var bb = it.lab ? it.lab.b : '';\n          return it.id + \",\" + it.timestamp + \",\" + r + \",\" + g + \",\" + b + \",\" + L + \",\" + a + \",\" + bb + \",\" + (it.photoUri || '') + \",\" + (it.croppedUri || '');\n        }).join('\\n');\n        var csv = header + rows;\n        var path = FileSystem.documentDirectory + (\"scans_export_\" + Date.now() + \".csv\");\n        yield FileSystem.writeAsStringAsync(path, csv, {\n          encoding: FileSystem.EncodingType.UTF8\n        });\n        Alert.alert('Exported', \"CSV written to:\\n\" + path);\n      } catch (e) {\n        console.warn('exportLogsCSV failed', e);\n        Alert.alert('Export failed', String(e));\n      }\n    });\n    return _exportLogsCSV.apply(this, arguments);\n  }\n  if (hasPermission === null) return _jsx(View, {\n    style: styles.container,\n    children: _jsx(Text, {\n      style: styles.info,\n      children: \"Requesting camera permission...\"\n    })\n  });\n  if (hasPermission === false) return _jsx(View, {\n    style: styles.container,\n    children: _jsx(Text, {\n      style: styles.info,\n      children: \"No access to camera\"\n    })\n  });\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsxs(View, {\n      style: styles.tabBar,\n      children: [_jsx(TouchableOpacity, {\n        style: [styles.tabButton, activeTab === 'camera' && styles.tabActive],\n        onPress: function onPress() {\n          return setActiveTab('camera');\n        },\n        children: _jsx(Text, {\n          style: styles.btnText,\n          children: \"Camera\"\n        })\n      }), _jsx(TouchableOpacity, {\n        style: [styles.tabButton, activeTab === 'logs' && styles.tabActive],\n        onPress: function onPress() {\n          return setActiveTab('logs');\n        },\n        children: _jsx(Text, {\n          style: styles.btnText,\n          children: \"Logs\"\n        })\n      })]\n    }), activeTab === 'camera' ? !photoUri ? _jsxs(View, {\n      style: styles.cameraContainer,\n      children: [_jsx(Camera, {\n        style: styles.camera,\n        type: type,\n        ref: cameraRef,\n        ratio: \"16:9\",\n        children: _jsx(View, {\n          style: styles.overlayContainer,\n          pointerEvents: \"none\",\n          children: _jsx(View, {\n            style: styles.roi\n          })\n        })\n      }), _jsxs(View, {\n        style: styles.controls,\n        children: [_jsx(TouchableOpacity, {\n          style: styles.button,\n          onPress: function onPress() {\n            return setType(function (prev) {\n              return prev === Camera.Constants.Type.back ? Camera.Constants.Type.front : Camera.Constants.Type.back;\n            });\n          },\n          children: _jsx(Text, {\n            style: styles.btnText,\n            children: \"Flip\"\n          })\n        }), _jsx(TouchableOpacity, {\n          style: styles.captureButton,\n          onPress: takePhotoAndCropROI,\n          disabled: processing,\n          children: _jsx(Text, {\n            style: styles.btnText,\n            children: processing ? \"Scanning...\" : \"Scan\"\n          })\n        }), _jsx(TouchableOpacity, {\n          style: styles.button,\n          onPress: function onPress() {},\n          children: _jsx(Text, {\n            style: styles.btnText,\n            children: \"Help\"\n          })\n        })]\n      })]\n    }) : _jsxs(View, {\n      style: styles.resultContainer,\n      children: [_jsx(Text, {\n        style: styles.info,\n        children: \"Captured\"\n      }), photoUri && _jsx(Image, {\n        source: {\n          uri: photoUri\n        },\n        style: styles.preview\n      }), _jsx(Text, {\n        style: styles.info,\n        children: \"Cropped ROI\"\n      }), croppedUri && _jsx(Image, {\n        source: {\n          uri: croppedUri\n        },\n        style: styles.roiPreview\n      }), _jsxs(Text, {\n        style: styles.info,\n        children: [\"Avg RGB: \", avgRgb ? avgRgb[0] + \", \" + avgRgb[1] + \", \" + avgRgb[2] : '—']\n      }), _jsxs(Text, {\n        style: styles.info,\n        children: [\"Lab: \", lab ? lab.L.toFixed(2) + \", \" + lab.a.toFixed(2) + \", \" + lab.b.toFixed(2) : '—']\n      }), _jsxs(View, {\n        style: styles.controlsRow,\n        children: [_jsx(TouchableOpacity, {\n          style: styles.button,\n          onPress: reset,\n          children: _jsx(Text, {\n            style: styles.btnText,\n            children: \"Retake\"\n          })\n        }), _jsx(TouchableOpacity, {\n          style: styles.button,\n          onPress: function onPress() {},\n          children: _jsx(Text, {\n            style: styles.btnText,\n            children: \"Use\"\n          })\n        })]\n      })]\n    }) : _jsxs(View, {\n      style: styles.logsContainer,\n      children: [_jsxs(View, {\n        style: styles.logsHeader,\n        children: [_jsxs(Text, {\n          style: styles.info,\n          children: [\"Scans: \", logs.length]\n        }), _jsxs(View, {\n          style: {\n            flexDirection: 'row',\n            gap: 8\n          },\n          children: [_jsx(TouchableOpacity, {\n            style: styles.button,\n            onPress: function onPress() {\n              Alert.alert('Clear logs', 'Remove all saved scans?', [{\n                text: 'Cancel'\n              }, {\n                text: 'Clear',\n                style: 'destructive',\n                onPress: clearScans\n              }]);\n            },\n            children: _jsx(Text, {\n              style: styles.btnText,\n              children: \"Clear\"\n            })\n          }), _jsx(TouchableOpacity, {\n            style: styles.button,\n            onPress: exportLogsCSV,\n            children: _jsx(Text, {\n              style: styles.btnText,\n              children: \"Export CSV\"\n            })\n          })]\n        })]\n      }), _jsx(FlatList, {\n        data: logs,\n        keyExtractor: function keyExtractor(item) {\n          return String(item.id);\n        },\n        renderItem: function renderItem(_ref2) {\n          var item = _ref2.item;\n          return _jsxs(View, {\n            style: styles.logRow,\n            children: [item.croppedUri && _jsx(Image, {\n              source: {\n                uri: item.croppedUri\n              },\n              style: styles.logThumb\n            }), _jsxs(View, {\n              style: {\n                flex: 1,\n                marginLeft: 8\n              },\n              children: [_jsx(Text, {\n                style: {\n                  color: '#fff'\n                },\n                children: new Date(item.timestamp).toLocaleString()\n              }), _jsxs(Text, {\n                style: {\n                  color: '#ddd'\n                },\n                children: [\"RGB: \", item.avgRgb ? item.avgRgb[0] + \", \" + item.avgRgb[1] + \", \" + item.avgRgb[2] : '—']\n              }), _jsxs(Text, {\n                style: {\n                  color: '#ddd'\n                },\n                children: [\"Lab: \", item.lab ? item.lab.L.toFixed(1) + \", \" + item.lab.a.toFixed(1) + \", \" + item.lab.b.toFixed(1) : '—']\n              })]\n            })]\n          });\n        }\n      })]\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"#000\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  tabBar: {\n    width: '100%',\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    paddingTop: 24,\n    paddingBottom: 8,\n    backgroundColor: '#001'\n  },\n  tabButton: {\n    padding: 10\n  },\n  tabActive: {\n    borderBottomWidth: 2,\n    borderBottomColor: '#1e90ff'\n  },\n  cameraContainer: {\n    flex: 1,\n    width: \"100%\"\n  },\n  camera: {\n    flex: 1\n  },\n  overlayContainer: _objectSpread(_objectSpread({}, StyleSheet.absoluteFillObject), {}, {\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  }),\n  roi: {\n    width: \"18%\",\n    aspectRatio: 1,\n    borderWidth: 2,\n    borderColor: \"rgba(255,255,255,0.9)\",\n    borderRadius: 6,\n    backgroundColor: \"transparent\"\n  },\n  controls: {\n    position: \"absolute\",\n    bottom: 24,\n    left: 0,\n    right: 0,\n    flexDirection: \"row\",\n    justifyContent: \"space-evenly\",\n    alignItems: \"center\"\n  },\n  button: {\n    padding: 12,\n    backgroundColor: \"rgba(255,255,255,0.12)\",\n    borderRadius: 8\n  },\n  captureButton: {\n    padding: 14,\n    backgroundColor: \"#1e90ff\",\n    borderRadius: 36\n  },\n  btnText: {\n    color: \"white\",\n    fontWeight: \"600\"\n  },\n  info: {\n    color: \"white\",\n    margin: 8\n  },\n  resultContainer: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    padding: 12\n  },\n  preview: {\n    width: 300,\n    height: 300 * (16 / 9),\n    resizeMode: \"contain\",\n    marginVertical: 8\n  },\n  roiPreview: {\n    width: 120,\n    height: 120,\n    resizeMode: \"cover\",\n    marginVertical: 8\n  },\n  controlsRow: {\n    flexDirection: \"row\",\n    gap: 12,\n    marginTop: 12\n  },\n  logsContainer: {\n    flex: 1,\n    width: '100%',\n    padding: 12\n  },\n  logsHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center'\n  },\n  logRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingVertical: 8,\n    borderBottomWidth: 1,\n    borderBottomColor: '#111'\n  },\n  logThumb: {\n    width: 64,\n    height: 64,\n    borderRadius: 6\n  }\n});","map":{"version":3,"names":["React","useEffect","useRef","useState","View","Text","TouchableOpacity","StyleSheet","Image","FlatList","Alert","Platform","Camera","ImageManipulator","FileSystem","rgbToLab","AsyncStorage","jsx","_jsx","jsxs","_jsxs","computeAverageRGBFromUri","_x","_computeAverageRGBFromUri","apply","arguments","_asyncToGenerator","uri","Skia","require","Error","b64","readAsStringAsync","encoding","EncodingType","Base64","bytes","atob","bin","Uint8Array","length","i","charCodeAt","Buffer","buf","from","img","MakeImageFromEncoded","w","width","h","height","readPixels","px","r","g","b","count","Math","round","e","console","warn","SERVER","resp","fetch","method","headers","body","JSON","stringify","imageBase64","ok","status","data","json","Index","_useState","_useState2","_slicedToArray","hasPermission","setHasPermission","_useState3","Constants","Type","back","_useState4","type","setType","cameraRef","_useState5","_useState6","photoUri","setPhotoUri","_useState7","_useState8","croppedUri","setCroppedUri","_useState9","_useState0","avgRgb","setAvgRgb","_useState1","_useState10","lab","setLab","_useState11","_useState12","processing","setProcessing","_useState13","_useState14","activeTab","setActiveTab","_useState15","_useState16","logs","setLogs","_yield$Camera$request","requestCameraPermissionsAsync","cur","getItem","arr","parse","takePhotoAndCropROI","_takePhotoAndCropROI","current","_photo$width","_photo$height","photo","takePictureAsync","quality","skipProcessing","OS","cropSize","floor","min","originX","originY","manipResult","manipulateAsync","crop","compress","format","SaveFormat","JPEG","avg","labVal","entry","id","Date","now","timestamp","toISOString","unshift","setItem","metadata","reset","clearScans","_clearScans","removeItem","exportLogsCSV","_exportLogsCSV","alert","header","rows","map","it","L","a","bb","join","csv","path","documentDirectory","writeAsStringAsync","UTF8","String","style","styles","container","children","info","tabBar","tabButton","tabActive","onPress","btnText","cameraContainer","camera","ref","ratio","overlayContainer","pointerEvents","roi","controls","button","prev","front","captureButton","disabled","resultContainer","source","preview","roiPreview","toFixed","controlsRow","logsContainer","logsHeader","flexDirection","gap","text","keyExtractor","item","renderItem","_ref2","logRow","logThumb","flex","marginLeft","color","toLocaleString","create","backgroundColor","alignItems","justifyContent","paddingTop","paddingBottom","padding","borderBottomWidth","borderBottomColor","_objectSpread","absoluteFillObject","aspectRatio","borderWidth","borderColor","borderRadius","position","bottom","left","right","fontWeight","margin","resizeMode","marginVertical","marginTop","paddingVertical"],"sources":["C:/Users/Neel/Downloads/EarthPrize26-HOLDER/EarthPrize2026-AquaBond-App/index.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport { View, Text, TouchableOpacity, StyleSheet, Image, FlatList, Alert, Platform } from \"react-native\";\r\nimport { Camera } from \"expo-camera\";\r\nimport * as ImageManipulator from \"expo-image-manipulator\";\r\nimport * as FileSystem from \"expo-file-system\";\r\nimport { rgbToLab } from \"./colorUtils\";\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\n\r\n// Attempt to compute average RGB from an image URI using Skia if available.\r\nasync function computeAverageRGBFromUri(uri: string): Promise<[number, number, number] | null> {\r\n  // Try Skia-based decode (guarded)\r\n  try {\r\n    // dynamic require so app runs even if Skia isn't installed\r\n    // @ts-ignore\r\n    const Skia = require('@shopify/react-native-skia');\r\n    if (!Skia) throw new Error('Skia not available');\r\n\r\n    // read file as base64\r\n    const b64 = await FileSystem.readAsStringAsync(uri, { encoding: FileSystem.EncodingType.Base64 });\r\n    // decode base64 to bytes\r\n    let bytes: Uint8Array;\r\n    if (typeof atob === 'function') {\r\n      const bin = atob(b64);\r\n      bytes = new Uint8Array(bin.length);\r\n      for (let i = 0; i < bin.length; i++) bytes[i] = bin.charCodeAt(i);\r\n    } else if (typeof Buffer !== 'undefined') {\r\n      // Node-style Buffer available in some RN setups\r\n      const buf = Buffer.from(b64, 'base64');\r\n      bytes = new Uint8Array(buf);\r\n    } else {\r\n      throw new Error('No base64->bytes available');\r\n    }\r\n\r\n    const img = Skia.Image.MakeImageFromEncoded(bytes);\r\n    if (!img) throw new Error('Skia failed to decode image');\r\n    const w = img.width();\r\n    const h = img.height();\r\n    // readPixels may not be present on every binding; attempt it\r\n    // @ts-ignore\r\n    if (typeof img.readPixels === 'function') {\r\n      // readPixels returns a Uint8Array RGBA\r\n      // @ts-ignore\r\n      const px = img.readPixels(0, 0, w, h);\r\n      if (!px) throw new Error('readPixels returned null');\r\n      let r = 0, g = 0, b = 0, count = 0;\r\n      for (let i = 0; i < px.length; i += 4) {\r\n        r += px[i];\r\n        g += px[i + 1];\r\n        b += px[i + 2];\r\n        count++;\r\n      }\r\n      return [Math.round(r / count), Math.round(g / count), Math.round(b / count)];\r\n    } else {\r\n      throw new Error('img.readPixels not available on this Skia build');\r\n    }\r\n  } catch (e) {\r\n    console.warn('computeAverageRGBFromUri Skia path failed:', e);\r\n  }\r\n\r\n  // Fallback: upload the cropped image to a decode server which returns average RGB.\r\n  try {\r\n    const SERVER = \"http://10.0.2.2:3000\"; // change to your server host (use 10.0.2.2 for Android emulator)\r\n    const b64 = await FileSystem.readAsStringAsync(uri, { encoding: FileSystem.EncodingType.Base64 });\r\n    const resp = await fetch(`${SERVER}/decode`, {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({ imageBase64: b64 })\r\n    });\r\n    if (!resp.ok) throw new Error(`server decode failed: ${resp.status}`);\r\n    const data = await resp.json();\r\n    if (data && typeof data.r === 'number' && typeof data.g === 'number' && typeof data.b === 'number') {\r\n      return [Math.round(data.r), Math.round(data.g), Math.round(data.b)];\r\n    }\r\n    return null;\r\n  } catch (e) {\r\n    console.warn('computeAverageRGBFromUri server fallback failed:', e);\r\n    return null;\r\n  }\r\n}\r\n\r\nexport default function Index() {\r\n  const [hasPermission, setHasPermission] = useState<boolean | null>(null);\r\n  const [type, setType] = useState(Camera.Constants.Type.back);\r\n  const cameraRef = useRef<Camera | null>(null);\r\n  const [photoUri, setPhotoUri] = useState<string | null>(null);\r\n  const [croppedUri, setCroppedUri] = useState<string | null>(null);\r\n  const [avgRgb, setAvgRgb] = useState<[number, number, number] | null>(null);\r\n  const [lab, setLab] = useState<{ L: number; a: number; b: number } | null>(null);\r\n  const [processing, setProcessing] = useState(false);\r\n  const [activeTab, setActiveTab] = useState<'camera'|'logs'>('camera');\r\n  const [logs, setLogs] = useState<any[]>([]);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      const { status } = await Camera.requestCameraPermissionsAsync();\r\n      setHasPermission(status === \"granted\");\r\n      // load existing scans\r\n      try {\r\n        const cur = await AsyncStorage.getItem('scans');\r\n        const arr = cur ? JSON.parse(cur) : [];\r\n        setLogs(arr);\r\n      } catch (e) {\r\n        console.warn('load scans failed', e);\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  async function takePhotoAndCropROI() {\r\n    if (!cameraRef.current || processing) return;\r\n    setProcessing(true);\r\n    try {\r\n      const photo = await cameraRef.current.takePictureAsync({ quality: 0.8, skipProcessing: Platform.OS === \"android\" });\r\n      setPhotoUri(photo.uri);\r\n\r\n      const w = photo.width ?? 0;\r\n      const h = photo.height ?? 0;\r\n      const cropSize = Math.floor(Math.min(w, h) * 0.12);\r\n      const originX = Math.floor((w - cropSize) / 2);\r\n      const originY = Math.floor((h - cropSize) / 2);\r\n\r\n      const manipResult = await ImageManipulator.manipulateAsync(\r\n        photo.uri,\r\n        [{ crop: { originX, originY, width: cropSize, height: cropSize } }],\r\n        { compress: 0.9, format: ImageManipulator.SaveFormat.JPEG }\r\n      );\r\n      setCroppedUri(manipResult.uri);\r\n\r\n      // try to compute average RGB from the cropped image (in-app or server fallback)\r\n      try {\r\n        const avg = await computeAverageRGBFromUri(manipResult.uri);\r\n        if (avg) {\r\n          setAvgRgb(avg);\r\n          const labVal = rgbToLab(avg[0], avg[1], avg[2]);\r\n          setLab(labVal);\r\n          const entry = {\r\n            id: Date.now(),\r\n            timestamp: new Date().toISOString(),\r\n            photoUri: photo.uri,\r\n            croppedUri: manipResult.uri,\r\n            avgRgb: avg,\r\n            lab: labVal\r\n          };\r\n          // persist\r\n          try {\r\n            const cur = await AsyncStorage.getItem('scans');\r\n            const arr = cur ? JSON.parse(cur) : [];\r\n            arr.unshift(entry);\r\n            await AsyncStorage.setItem('scans', JSON.stringify(arr));\r\n            setLogs(arr);\r\n          } catch (e) { console.warn('save scan failed', e); }\r\n            // auto-upload scan to server (non-blocking)\r\n            (async () => {\r\n              try {\r\n                const SERVER = 'http://10.0.2.2:3000';\r\n                const b64 = await FileSystem.readAsStringAsync(manipResult.uri, { encoding: FileSystem.EncodingType.Base64 });\r\n                await fetch(`${SERVER}/upload`, {\r\n                  method: 'POST',\r\n                  headers: { 'Content-Type': 'application/json' },\r\n                  body: JSON.stringify({ imageBase64: b64, metadata: { timestamp: entry.timestamp, avgRgb: entry.avgRgb, lab: entry.lab } })\r\n                });\r\n              } catch (e) { console.warn('auto-upload failed', e); }\r\n            })();\r\n        }\r\n      } catch (e) {\r\n        console.warn(\"pixel decode failed\", e);\r\n      }\r\n\r\n    } catch (e) {\r\n      console.warn(\"capture error\", e);\r\n    } finally {\r\n      setProcessing(false);\r\n    }\r\n  }\r\n\r\n  function reset() {\r\n    setPhotoUri(null);\r\n    setCroppedUri(null);\r\n    setAvgRgb(null);\r\n    setLab(null);\r\n  }\r\n\r\n  async function clearScans() {\r\n    try {\r\n      await AsyncStorage.removeItem('scans');\r\n      setLogs([]);\r\n    } catch (e) {\r\n      console.warn('clearScans failed', e);\r\n    }\r\n  }\r\n\r\n  async function exportLogsCSV() {\r\n    try {\r\n      if (!logs || logs.length === 0) {\r\n        Alert.alert('No logs', 'There are no scans to export.');\r\n        return;\r\n      }\r\n      const header = 'id,timestamp,r,g,b,L,a,b,photoUri,croppedUri\\n';\r\n      const rows = logs.map((it: any) => {\r\n        const r = it.avgRgb ? it.avgRgb[0] : '';\r\n        const g = it.avgRgb ? it.avgRgb[1] : '';\r\n        const b = it.avgRgb ? it.avgRgb[2] : '';\r\n        const L = it.lab ? it.lab.L : '';\r\n        const a = it.lab ? it.lab.a : '';\r\n        const bb = it.lab ? it.lab.b : '';\r\n        return `${it.id},${it.timestamp},${r},${g},${b},${L},${a},${bb},${it.photoUri || ''},${it.croppedUri || ''}`;\r\n      }).join('\\n');\r\n      const csv = header + rows;\r\n      const path = FileSystem.documentDirectory + `scans_export_${Date.now()}.csv`;\r\n      await FileSystem.writeAsStringAsync(path, csv, { encoding: FileSystem.EncodingType.UTF8 });\r\n      Alert.alert('Exported', `CSV written to:\\n${path}`);\r\n    } catch (e) {\r\n      console.warn('exportLogsCSV failed', e);\r\n      Alert.alert('Export failed', String(e));\r\n    }\r\n  }\r\n\r\n  if (hasPermission === null) return <View style={styles.container}><Text style={styles.info}>Requesting camera permission...</Text></View>;\r\n  if (hasPermission === false) return <View style={styles.container}><Text style={styles.info}>No access to camera</Text></View>;\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <View style={styles.tabBar}>\r\n        <TouchableOpacity style={[styles.tabButton, activeTab==='camera' && styles.tabActive]} onPress={() => setActiveTab('camera')}><Text style={styles.btnText}>Camera</Text></TouchableOpacity>\r\n        <TouchableOpacity style={[styles.tabButton, activeTab==='logs' && styles.tabActive]} onPress={() => setActiveTab('logs')}><Text style={styles.btnText}>Logs</Text></TouchableOpacity>\r\n      </View>\r\n\r\n      {activeTab === 'camera' ? (\r\n        !photoUri ? (\r\n          <View style={styles.cameraContainer}>\r\n            <Camera style={styles.camera} type={type} ref={cameraRef} ratio=\"16:9\">\r\n              <View style={styles.overlayContainer} pointerEvents=\"none\">\r\n                <View style={styles.roi} />\r\n              </View>\r\n            </Camera>\r\n            <View style={styles.controls}>\r\n              <TouchableOpacity\r\n                style={styles.button}\r\n                onPress={() => setType((prev: number) => prev === Camera.Constants.Type.back ? Camera.Constants.Type.front : Camera.Constants.Type.back)}\r\n              >\r\n                <Text style={styles.btnText}>Flip</Text>\r\n              </TouchableOpacity>\r\n              <TouchableOpacity style={styles.captureButton} onPress={takePhotoAndCropROI} disabled={processing}>\r\n                <Text style={styles.btnText}>{processing ? \"Scanning...\" : \"Scan\"}</Text>\r\n              </TouchableOpacity>\r\n              <TouchableOpacity style={styles.button} onPress={() => {}}>\r\n                <Text style={styles.btnText}>Help</Text>\r\n              </TouchableOpacity>\r\n            </View>\r\n          </View>\r\n        ) : (\r\n          <View style={styles.resultContainer}>\r\n            <Text style={styles.info}>Captured</Text>\r\n            {photoUri && <Image source={{ uri: photoUri }} style={styles.preview} />}\r\n            <Text style={styles.info}>Cropped ROI</Text>\r\n            {croppedUri && <Image source={{ uri: croppedUri }} style={styles.roiPreview} />}\r\n            <Text style={styles.info}>Avg RGB: {avgRgb ? `${avgRgb[0]}, ${avgRgb[1]}, ${avgRgb[2]}` : '—'}</Text>\r\n            <Text style={styles.info}>Lab: {lab ? `${lab.L.toFixed(2)}, ${lab.a.toFixed(2)}, ${lab.b.toFixed(2)}` : '—'}</Text>\r\n            <View style={styles.controlsRow}>\r\n              <TouchableOpacity style={styles.button} onPress={reset}><Text style={styles.btnText}>Retake</Text></TouchableOpacity>\r\n              <TouchableOpacity style={styles.button} onPress={() => { /* placeholder: export/send croppedUri for analysis */ }}><Text style={styles.btnText}>Use</Text></TouchableOpacity>\r\n            </View>\r\n          </View>\r\n        )\r\n      ) : (\r\n        <View style={styles.logsContainer}>\r\n          <View style={styles.logsHeader}>\r\n            <Text style={styles.info}>Scans: {logs.length}</Text>\r\n            <View style={{flexDirection:'row', gap:8}}>\r\n              <TouchableOpacity style={styles.button} onPress={() => { Alert.alert('Clear logs','Remove all saved scans?', [{text:'Cancel'},{text:'Clear', style:'destructive', onPress: clearScans}])}}><Text style={styles.btnText}>Clear</Text></TouchableOpacity>\r\n              <TouchableOpacity style={styles.button} onPress={exportLogsCSV}><Text style={styles.btnText}>Export CSV</Text></TouchableOpacity>\r\n            </View>\r\n          </View>\r\n          <FlatList data={logs} keyExtractor={(item: any) => String(item.id)} renderItem={({item}: {item: any}) => (\r\n            <View style={styles.logRow}>\r\n              {item.croppedUri && <Image source={{uri:item.croppedUri}} style={styles.logThumb} />}\r\n              <View style={{flex:1, marginLeft:8}}>\r\n                <Text style={{color:'#fff'}}>{new Date(item.timestamp).toLocaleString()}</Text>\r\n                <Text style={{color:'#ddd'}}>RGB: {item.avgRgb ? `${item.avgRgb[0]}, ${item.avgRgb[1]}, ${item.avgRgb[2]}` : '—'}</Text>\r\n                <Text style={{color:'#ddd'}}>Lab: {item.lab ? `${item.lab.L.toFixed(1)}, ${item.lab.a.toFixed(1)}, ${item.lab.b.toFixed(1)}` : '—'}</Text>\r\n              </View>\r\n            </View>\r\n          )} />\r\n        </View>\r\n      )}\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: { flex: 1, backgroundColor: \"#000\", alignItems: \"center\", justifyContent: \"center\" },\r\n  tabBar: { width: '100%', flexDirection: 'row', justifyContent: 'space-around', paddingTop: 24, paddingBottom: 8, backgroundColor: '#001' },\r\n  tabButton: { padding: 10 },\r\n  tabActive: { borderBottomWidth: 2, borderBottomColor: '#1e90ff' },\r\n  cameraContainer: { flex: 1, width: \"100%\" },\r\n  camera: { flex: 1 },\r\n  overlayContainer: { ...StyleSheet.absoluteFillObject, alignItems: \"center\", justifyContent: \"center\" },\r\n  roi: { width: \"18%\", aspectRatio: 1, borderWidth: 2, borderColor: \"rgba(255,255,255,0.9)\", borderRadius: 6, backgroundColor: \"transparent\" },\r\n  controls: { position: \"absolute\", bottom: 24, left: 0, right: 0, flexDirection: \"row\", justifyContent: \"space-evenly\", alignItems: \"center\" },\r\n  button: { padding: 12, backgroundColor: \"rgba(255,255,255,0.12)\", borderRadius: 8 },\r\n  captureButton: { padding: 14, backgroundColor: \"#1e90ff\", borderRadius: 36 },\r\n  btnText: { color: \"white\", fontWeight: \"600\" },\r\n  info: { color: \"white\", margin: 8 },\r\n  resultContainer: { flex: 1, alignItems: \"center\", justifyContent: \"center\", padding: 12 },\r\n  preview: { width: 300, height: 300 * (16/9), resizeMode: \"contain\", marginVertical: 8 },\r\n  roiPreview: { width: 120, height: 120, resizeMode: \"cover\", marginVertical: 8 },\r\n  controlsRow: { flexDirection: \"row\", gap: 12, marginTop: 12 },\r\n  logsContainer: { flex: 1, width: '100%', padding: 12 },\r\n  logsHeader: { flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center' },\r\n  logRow: { flexDirection: 'row', alignItems: 'center', paddingVertical: 8, borderBottomWidth: 1, borderBottomColor: '#111' },\r\n  logThumb: { width: 64, height: 64, borderRadius: 6 }\r\n});\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}